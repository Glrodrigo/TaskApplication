<app-menu></app-menu>

<div class="block-container">
    <div class="load" *ngIf="isLoading">
        <app-load></app-load>
    </div>
    <div class="block-form-info">
        <div class="block-form">
            <div class="select-field">
                <label for="select">Nome do Status</label>
                <div class="custom-dropdown">
                    <div class="selected" (click)="toggleStatusDropdown()">
                      {{ selectedStatusOption || 'Selecione uma opção' }}
                    </div>
                    <ul class="options" *ngIf="showStatusDropdown">
                      <li *ngFor="let item of statusList" (click)="selectStatusOption(item.name)">
                        {{ item.name }}
                      </li>
                    </ul>
                  </div>  
            </div>
            <div class="buttons">
                <button mat-raised-button (click)="searchEvent()">BUSCAR</button>
            </div>
            <div class="task-list" *ngIf="taskList.length > 0">
                <div class="card" *ngFor="let task of taskList">
                  
                  <div class="task-header">
                    <span class="task-date">Criado {{ task.creationDate | date: 'dd/MM/yyyy' }}</span>
                  </div>
                  
                  <div class="task-content">
                    <div class="task-image">
                      <img src="assets/images/success.png" alt="Imagem da tarefa">
                    </div>
                    
                    <div class="task-info">
                      <h4 class="task-title">{{ task.title }}</h4>
                      <p class="task-description">{{ task.description }}</p>
                    </div>
                  </div>
              
                  <div class="task-actions">
                    <select [(ngModel)]="task.selectedStatus">
                      <option *ngFor="let s of statusList" [value]="s.code">
                        {{ s.name }}
                      </option>
                    </select>
                    
                    <button (click)="updateTaskStatus(task)">Confirmar</button>
                    <button (click)="change(task)">Editar</button>
                  </div>
                </div>
              </div>
              
        </div>
    </div>
</div>